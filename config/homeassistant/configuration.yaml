# Home Assistant Configuration
# Minimal configuration for integration testing

homeassistant:
  name: ObStackd Test
  latitude: 37.7749
  longitude: -122.4194
  elevation: 0
  unit_system: metric
  time_zone: UTC
  external_url: "http://homeassistant:8123"
  internal_url: "http://homeassistant:8123"
  
# Enable default configuration features
default_config:

# Enable Prometheus metrics
prometheus:
  namespace: homeassistant

# HTTP configuration
http:
  server_port: 8123
  cors_allowed_origins:
    - http://localhost:3000
    - http://prometheus:9090
    - http://otel-collector:8888

# Logger configuration
logger:
  default: info
  logs:
    homeassistant.core: info
    homeassistant.components.prometheus: debug

# System health
system_health:

# Dummy automations for testing
automation:
  - alias: "Test Automation 1"
    trigger:
      - platform: time
        at: "00:00:00"
    action:
      - service: persistent_notification.create
        data:
          message: "Test automation executed"
          
  - alias: "Test Automation 2"
    trigger:
      - platform: time
        at: "12:00:00"
    action:
      - service: persistent_notification.create
        data:
          message: "Midday test automation executed"

# Dummy sensors for generating metrics
sensor:
  - platform: time_date
    display_options:
      - 'time'
      - 'date'
      
  - platform: template
    sensors:
      test_sensor_1:
        friendly_name: "Test Sensor 1"
        value_template: "{{ 42 }}"
        unit_of_measurement: 'units'
        
      test_sensor_2:
        friendly_name: "Test Sensor 2"
        value_template: "{{ states('sensor.test_sensor_1') | int * 2 }}"
        unit_of_measurement: 'units'
